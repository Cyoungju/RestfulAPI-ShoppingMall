<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Nicepay spring-boot</title>
    <meta httpEquiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>

<span th:if="${user != null}" th:text="${user.username}"></span> 환영합니다~


<a href="/join" th:if="${user == null}">회원가입</a>
<a href="/login" th:if="${user == null}">로그인</a>


<h1>NICEPAY TEST</h1>
<button onclick="serverAuth()">serverAuth 결제하기</button>

<script src="https://pay.nicepay.co.kr/v1/js/"></script>

<script>
    function serverAuth() {
        AUTHNICE.requestPay({
            clientId: '{{clientId}}',
            method: 'card',
            orderId: '{{orderId}}',
            amount: 1004,
            goodsName: '나이스페이-상품',
            returnUrl: 'http://localhost:8080/serverAuth',
            fnError: function (result) {
                alert('개발자확인용 : ' + result.errorMsg + '')
            }
        });
    }
</script>

</body>
</html>

